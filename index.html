<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Javascript Debt Clock</title>

    <link rel="stylesheet" href="https://sophilabs.github.io/jquery-counter/stylesheets/styles.css">
    <link rel="stylesheet" href="https://sophilabs.github.io/jquery-counter/stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="https://sophilabs.github.io/jquery-counter/jquery.counter-analog.css">
    <link rel="stylesheet" href="https://sophilabs.github.io/jquery-counter/jquery.counter-analog2.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://sophilabs.github.io/jquery-counter/jquery.counter.js"></script>
  </head>
  <body>
<style>
section {
  border-top: 1px solid #bbb;

  width:auto;
  float:none;
  padding-top:20px;
  padding-bottom:20px;
  margin-bottom:20px;
}

footer {
float:none;
position:static;
}
    
</style>
    <div class="wrapper">
        <h1>Defence Unstructured Data Clock</h1>
        An illustration of the size (in megabytes) of our current known unstructured data holdings.

      </header>
      
      <section>
<div>

<h3>Stored in Exchange (MODNET Official)</h3>
    <p>   
        <span class="data_clock_1 counter counter-analog2"></span>
    </p>
   
</div>

          
<div>
<h3>Stored in individual OneDrives (MODNET Official)</h3>
    <p>
        <span class="data_clock_2 counter counter-analog2"></span>
    </p>
</div>

<div>
<h3>Defence Archive Service</h3>
    <p>
        <span class="data_clock_3 counter counter-analog2"></span>
    </p>
</div>

      <section>
          
          <div>
<h3>Total known unstructured holdings</h3>
    <p>
        <span class="data_clock_4 counter counter-analog2"></span>
    </p>
</div>

          
          
    <script>

function create_money_counter(jqSelector, initialValue, initialDate, changePerMonth, changeDirection, integerDigits, fractionDigits) {
  // AvgNumDaysInMonthPerYr / HrsPerDay / MinPerHr / SecPerMin
  var changePerSecond = changePerMonth/30.44/24/60/60;
  console.log("Change Per Second: "+changePerSecond.toString());
  // interval has to be in milliseconds
  var changeInterval = Math.pow(10, (0-fractionDigits)) * 1000 / changePerSecond;
  console.log("Change Interval: "+changeInterval.toString());
  var currentValue = initialValue;
    
  var secondsSinceInitial = (new Date() - initialDate)/1000;

    
//  document.write('###  initialDate= ');
//    document.write(initialDate);
//    document.write('###  new Date()= ');
//    document.write(new Date());
//    document.write('###  secondsSinceInitial= ');
//    document.write(secondsSinceInitial);

//  var secondsSinceInitial = 0;
  var diffSinceInitial = secondsSinceInitial*changePerSecond;
  if (changeDirection == 'down') {
    currentValue = currentValue - diffSinceInitial;
  } else {
    currentValue = currentValue + diffSinceInitial;
  }
  var formatString = (Number.parseFloat("9".repeat(integerDigits) +'.' + '9'.repeat(fractionDigits))).toLocaleString('en-US', { minimumFractionDigits: fractionDigits, minimumIntegerDigits: integerDigits } ).split('').join(' ')+ ' Mb';

  var calculatedInitialString = currentValue.toLocaleString('en-US', { minimumFractionDigits: fractionDigits, maximumFractionDigits: fractionDigits, minimumIntegerDigits: integerDigits } ).split('').join(' ');
  console.log(calculatedInitialString);
  console.log(formatString);

  $(jqSelector).counter({
    initial: calculatedInitialString,
    direction: changeDirection,
    format: formatString,
    interval: changeInterval,
  });
}


create_money_counter('.data_clock_1', 2250000000.0, new Date(2019, 00, 1, 0, 0, 0), 70000000.0, 'up', 9, 2);
create_money_counter('.data_clock_2', 1100000000, new Date(2019, 00, 1, 0, 0, 0), 20000000, 'up', 9, 2);
create_money_counter('.data_clock_3', 2500000000, new Date(2019, 00, 1, 0, 0, 0), 0.001, 'up', 9, 2);
create_money_counter('.data_clock_4', 5850000000, new Date(2019, 00, 1, 0, 0, 0), 90000000, 'up', 9, 2);

// notes
// Assumes figures start at 1 Jan 2019
// figures have to be x10 for reasons unclear!
        
          </script>




      </section>
        <p>Based on <a href="https://github.com/jonmchan/debtclock">Debt Clock</a> by <a href="https://github.com/jonmchan">Jonathan Chan</a></p>
    </div>
    <script src="https://sophilabs.github.io/jquery-counter/javascripts/scale.fix.js"></script>
  </body>
</html>

